<!DOCTYPE html>

<!--
  Google HTML5 slide template

  Authors: Luke MahÃ© (code)
           Marcin Wichary (code and design)

           Dominic Mazzoni (browser compatibility)
           Charles Chen (ChromeVox support)

  URL: http://code.google.com/p/html5slides/
-->

<html>
  <head>
    <title>Testing</title>

    <meta charset='utf-8'>
    <script src='https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js'></script>
    <script src='http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.2/underscore-min.js'></script>
    <script src='assets/js/slides.js'></script>

    <script src='assets/js/flickr.js'></script>
    <link rel="stylesheet" href="assets/css/styles.css">
    <link rel="stylesheet" href="assets/css/override.css">

  </head>

  <body id="local" style="display: none">

    <section class='slides layout-regular'>

      <!-- Your slides (<article>s) go here. Delete or comment out the
           slides below. -->
      <article>
        <div id="title">
    _   _              _    ___  _            _     _                  _
   /_\ | |_ __  ___ __| |_ / _ \| |__ ___ ___| |___| |_ ___   _ _  ___| |_
  / _ \| | '  \/ _ (_-&lt;  _| (_) | '_ (_-&lt;/ _ \ / -_)  _/ -_)_| ' \/ -_)  _|
 /_/ \_\_|_|_|_\___/__/\__|\___/|_.__/__/\___/_\___|\__\___(_)_||_\___|\__|
  ___                       ___              _
 | _ \__ _ _ __  ___ _ _   / __|_ _ ___ __ _| |_ _  _ _ _ ___ ___
 |  _/ _` | '_ \/ -_) '_| | (__| '_/ -_) _` |  _| || | '_/ -_|_-&lt;
 |_| \__,_| .__/\___|_|    \___|_| \___\__,_|\__|\_,_|_| \___/__/
          |_|

        </div>
        <center>
          <div>
            Parslow and Elliott's Test Emporium
          <!-- Formatting with BR tags, I rule! -->
          <br/>
          <br/>
          Mssrs. Thomas W. Parslow &amp; Simon J. Elliott
          <br/>
          <br/>
          tom@almostobsolete.net / @almost <br/>
          simon@papercreatures.com / @purge
          </div>
        </center>
      </article>

      <article>
        <center>
        <h3>
          Part I: A Formal Introduction to Testing
        </h3>
        <div>
          <br/>
          Presented By:<br/>
          Simon Elliott Esq.<br/><br/>
          simon@papercreatures.com / @purge
        </div>
        </center>
      </article>

      <!-- INTRODUCTION -->

      <article>
        <h3>
          What is testing?
        </h3>
        <ul>
          <li></li>
        </ul>
      </article>

      <article>
        <h3>
          What isn't testing?
        </h3>
        <ul>
          <li>Sexy</li>
        </ul>
      </article>

      <article>
        <h3>
          Why YOU should test your code
        </h3>
        <ul>
          <li>Improve design and refactoring</li>
          <li>Quality (test coverage)</li>
          <li>Ease maintainance burden (especially for others)</li>
          <li>Client satisfaction</li>
          <li>Manual testing is much more boring than writing tests</li>
          <li>Increase productivity and sunshine ponies</li>
        </ul>
      </article>

      <article>
        <h3>
          Unit Tests
        </h3>
        <ul>
          <li>Low-level</li>
          <li>Functionality at method level</li>
          <li>Fast, self contained</li>
        </ul>
      </article>

      <article>
        <h3>
          Integration Tests
        </h3>
        <ul>
          <li>High-level</li>
          <li>Test as an aggregate to check parts work together</li>
          <li>Slower, more dependencies</li>
        </ul>
      </article>

      <article>
        <h3>
          Testing terminology
        </h3>
        <ul>
          <li>TDD - Test Driven Development
            <ul>
              <li>Write (failing) tests first</li>
              <li>Write minimal code to pass spec</li>
              <li>Refactor</li>
            </ul>
          </li>
          <li>BDD - Behaviour Driven Development
            <ul>
              <li>TDD + some enterprisey stuff to keep managers happy.</li>
              <li>Tests derived from specification</li>
            </ul>
          </li>
          <li>Assertions
          Checks the result of a test
          <ul>
            <li>ok()</li>
            <li>equal()</li>
            <li>deepEqual()</li>
          </ul>
          </li>
        </ul>
      </article>

      <article>
        <h3>
          Testing terminology
        </h3>
        <ul>
          <li>Spy<br/>
          <p>Records information about how a method is used</p>
          <ul>
            <li>arguments</li>
            <li>return values</li>
            <li>context</li>
          </ul>
          </li>
          <li>Stub
          <p>Fake methods with pre-programmed behaviour</p>
            <ul>
              <li>Wrap or replace existing function</li>
              <li>Returns pre-programmed value</li>
            </ul>
          </li>
          <li>Fixtures
            <ul>
              <li>Set-up + tear-down.</li>
              <li>Pre-set data of known quantities to test against. (such as filling a database)</li>
            </ul>
          </li>
        </ul>
      </article>

      <article>
        <h3>
          The JS Testing Libraries
        </h3>
        <ul>
         <li>Jasmine -
         <a href="http://pivotal.github.com/jasmine/">http://pivotal.github.com/jasmine/</a></li>
         <li>Vows -
         <a href="https://github.com/cloudhead/vows">https://github.com/cloudhead/vows</a></li>
         <li>QUnit -
         <a href="http://qunitjs.com/">http://qunitjs.com/</a></li>
         <li>Mocha -
         <a href="http://visionmedia.github.com/mocha/">http://visionmedia.github.com/mocha/</a></li>
         <li>Chai -
         <a href="http://chaijs.com/">http://chaijs.com/ (assertions)</a></li>
         <li>Sinon -
         <a href="http://sinonjs.org/">http://sinonjs.org/ (spies)</a></li>
         <li>* New ones available every few minutes *</li>
        </ul>
      </article>

      <article>
        <h3>Introduction to Mocha</h3>
        <ul>
          <li>Easy asynchronous testing</li>
          <li>Choose your own adventure
            <ul>
              <li>Assertion (chai, expect,js, should.js, better-assert)</li>
              <li>Interfaces (TDD, BDD, exports, qunit)</li>
              <li>Reporter (spec, junit (Jenkins), TAP, nyancat)</li>
            </ul>
          </li>
          <li>Code Coverage</li>
          <li>Decent diffing</li>
          <li>Leak detection</li>
          <li>Generally Sane (unless you value /usr/local)</li>
          <li>Good for both node and browser</li>
        </ul>
      </article>

      <article>
        <h3>Your first test</h3>
        <ul>
          <li>Simple function to find the distance from a to b</li>
          <li>npm install -g mocha chai sinon</li>
          <pre class="compact">
describe('Point', function() {
  var p;
  beforeEach(function(done) {
    p = new Point(1,5);
    done();
  });

  describe('getDistanceLeft()', function() {
    it('correctly worked out distance', function() {
      assert.equal(p.getDistanceLeft(), 4, "correct amount");
    });
  });
});
          </pre>
          <li>mocha -w test.js</li>
        </ul>
      </article>

      <article>
        <h3>Your first passing solution</h3>
        <ul>
          <li>
            <pre>
function Point(a,b) {
  var position = a;

  this.move = function(distance) {
    position += distance;
  };

  this.getDistanceLeft = function() {
    return b - position;
  };
};
            </pre>
          </li>
        </ul>
      </article>

      <article>
        <h3>Add caching (Premature optimizations FTW!!)</h3>
        <ul>
        <li>Working out the difference is complicated! lets cache it.</li>
      </ul>
            <pre class="compact">
describe('Caching', function() {
  beforeEach(function() {
    spy = sinon.spy(p, "calculateDistanceLeft");
  });

  it('cached result', function() {
    p.getDistanceLeft();
    p.getDistanceLeft();
    assert.equal(spy.callCount, 1, "called once");
    assert.equal(p.getDistanceLeft(), 4, "correct distance");
  });

  it('correctly invalidated', function() {
    var res = [p.getDistanceLeft(), p.move(1), p.getDistanceLeft()];
    assert.deepEqual(res, [4, undefined, 3], "We've moved");
    assert.equal(spy.callCount, 2, "called again! invalidated!");
  });
});
            </pre>
      </article>

      <article>
        <h3>Adding caching (the code)</h3>
          <pre>
function Point(a,b) {
  var position = a;
  this.move = function(distance) {
    position += distance;
    //invalidate cache
    this.cachedDistance = null;
  };

  this.calculateDistanceLeft = function() {
    return this.cachedDistance = b - position;
  };

  this.getDistanceLeft = function() {
    return this.cachedDistance || this.calculateDistanceLeft();
  };
};
        </pre>
      </article>
      <article>
        <h3>Are we there yet?</h3>
        <ul>
          <li>We need to know if we've arrived!</li>
        </ul>
          <pre class="compact">
describe('Are we there yet?', function() {

  describe('without stub', function() {
    it('knows we are not there already', function() {
      assert.ok(!p.areWeThereYet(), "we are not there!");
    });
  });

  describe('with stub', function() {
    beforeEach(function() {
      stub = sinon.stub(p, "getDistanceLeft");
      stub.returns(0);
    });
    it('Thinks were there because of stub!!!!!112', function() {
      assert.ok(p.areWeThereYet(), "we are there!");
    });
  });
});
          </pre>
      </article>
      <article>
        <h3>Conclusion</h3>
        <ul>
          <li>WATCH IN AMAZEMENT has testing becomes sexy in PART II</li>
        </ul>
      </article>
    </section>
  </body>
</html>
